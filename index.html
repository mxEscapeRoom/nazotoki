<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>社内イベント用 謎解き</title>
    <style>
        /* --- 全体設定 --- */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-y: auto; /* Googleサイトでの二重スクロールバー防止 */
        }

        body {
            background-color: #1a1a1a;
            color: #e0e0e0;
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        /* --- コンテンツコンテナ --- */
        .container {
            width: 100%;
            max-width: 600px;
            background-color: #2a2a2a;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
            border: 1px solid rgba(0, 255, 255, 0.3);
        }

        /* --- 各ステップの共通スタイル --- */
        h1, h2 {
            color: #00ffff; /* サイバーな印象のシアン */
            margin-bottom: 25px;
            text-shadow: 0 0 5px #00ffff;
        }

        p {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        /* --- フォーム要素 --- */
        .question-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .question-item {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        label {
            margin-bottom: 8px;
            font-size: 1em;
            color: #c0c0c0;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            background-color: #1a1a1a;
            border: 1px solid #444;
            border-radius: 5px;
            color: #e0e0e0;
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        /* --- ボタン --- */
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(45deg, #00ffff, #0077ff);
            color: #1a1a1a;
            font-size: 1.1em;
            font-weight: bold;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.4);
        }

        /* --- フィードバックメッセージ --- */
        #feedback-message, #final-feedback-message {
            margin-top: 20px;
            color: #ff4d4d; /* エラーメッセージは赤色 */
            font-weight: bold;
            min-height: 24px;
        }

        /* --- クリア画面 --- */
        #step3 h1 {
            color: #00ff7f; /* クリアはライムグリーン */
            text-shadow: 0 0 10px #00ff7f;
        }

        .slack-btn {
            background: linear-gradient(45deg, #4a154b, #36c5f0); /* Slackカラー風 */
            color: white;
            font-weight: bold;
        }
        
        .slack-btn:hover {
            box-shadow: 0 5px 15px rgba(54, 197, 240, 0.4);
        }
        
        /* --- 非表示用クラス --- */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <div class="container">

        <!-- ===== ステップ1: 8問の問題 ===== -->
        <div id="step1">
            <h1>第一関門</h1>
            <p>8つの謎を解き明かし、答えを入力せよ。</p>
            <div class="question-grid">
                <!-- 8問分の入力フォーム -->
                <div class="question-item"><label for="q1">問1</label><input type="text" id="q1" name="q1"></div>
                <div class="question-item"><label for="q2">問2</label><input type="text" id="q2" name="q2"></div>
                <div class="question-item"><label for="q3">問3</label><input type="text" id="q3" name="q3"></div>
                <div class="question-item"><label for="q4">問4</label><input type="text" id="q4" name="q4"></div>
                <div class="question-item"><label for="q5">問5</label><input type="text" id="q5" name="q5"></div>
                <div class="question-item"><label for="q6">問6</label><input type="text" id="q6" name="q6"></div>
                <div class="question-item"><label for="q7">問7</label><input type="text" id="q7" name="q7"></div>
                <div class="question-item"><label for="q8">問8</label><input type="text" id="q8" name="q8"></div>
            </div>
            <button id="check-step1" class="btn">回答を送信</button>
            <div id="feedback-message"></div>
        </div>

        <!-- ===== ステップ2: 最終問題 ===== -->
        <div id="step2" class="hidden">
            <h1>最終問題</h1>
            <p>最後のキーワードを入力し、脱出せよ。</p>
            <div class="question-item" style="max-width: 300px; margin: 0 auto 30px auto;">
                <label for="final-q">最後の答え</label>
                <input type="text" id="final-q" name="final-q">
            </div>
            <button id="check-step2" class="btn">最終回答</button>
            <div id="final-feedback-message"></div>
        </div>

        <!-- ===== ステップ3: クリア画面 ===== -->
        <div id="step3" class="hidden">
            <h1>CLEAR!</h1>
            <p>すべての謎を解き明かした！<br>下のボタンから報告チャンネルへ移動し、クリアしたチーム名を投稿してください。</p>
            <a id="slack-link" href="#" class="btn slack-btn" target="_blank" rel="noopener noreferrer">報告用Slackチャンネルへ</a>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ==================================================
            // == 設定エリア (非エンジニアもここを修正) ==
            // ==================================================
            const config = {
                // ステップ1の8問の答えを順番に入力してください
                // (大文字・小文字は区別されません)
                step1Answers: [
                    "こたえ1",
                    "こたえ2",
                    "こたえ3",
                    "こたえ4",
                    "こたえ5",
                    "こたえ6",
                    "こたえ7",
                    "こたえ8"
                ],

                // ステップ2の最終問題の答えを入力してください
                step2Answer: "さいごのこたえ",

                // クリア後に表示されるSlackリンクのURLを入力してください
                slackUrl: "https://app.slack.com/client/T00000000/C00000000"
            };
            // ==================================================
            // == ↑↑↑ 設定はここまで ↑↑↑ ==
            // ==================================================


            // --- DOM要素の取得 ---
            const step1 = document.getElementById('step1');
            const step2 = document.getElementById('step2');
            const step3 = document.getElementById('step3');

            const step1Inputs = Array.from({ length: 8 }, (_, i) => document.getElementById(`q${i + 1}`));
            const checkStep1Btn = document.getElementById('check-step1');
            const feedbackMessage = document.getElementById('feedback-message');

            const finalInput = document.getElementById('final-q');
            const checkStep2Btn = document.getElementById('check-step2');
            const finalFeedbackMessage = document.getElementById('final-feedback-message');
            
            const slackLink = document.getElementById('slack-link');

            // --- 初期設定 ---
            slackLink.href = config.slackUrl;

            // --- イベントリスナー ---

            // ステップ1の回答チェック
            checkStep1Btn.addEventListener('click', function() {
                const userAnswers = step1Inputs.map(input => input.value.trim().toLowerCase());
                const correctAnswers = config.step1Answers.map(ans => ans.toLowerCase());
                
                const incorrectQuestions = [];
                for (let i = 0; i < userAnswers.length; i++) {
                    if (userAnswers[i] !== correctAnswers[i]) {
                        incorrectQuestions.push(`問${i + 1}`);
                    }
                }

                if (incorrectQuestions.length === 0) {
                    // 正解
                    step1.classList.add('hidden');
                    step2.classList.remove('hidden');
                } else {
                    // 不正解
                    feedbackMessage.textContent = `${incorrectQuestions.join('と')}が違います。`;
                }
            });

            // ステップ2の回答チェック
            checkStep2Btn.addEventListener('click', function() {
                const userAnswer = finalInput.value.trim().toLowerCase();
                const correctAnswer = config.step2Answer.toLowerCase();

                if (userAnswer === correctAnswer) {
                    // 正解
                    step2.classList.add('hidden');
                    step3.classList.remove('hidden');
                } else {
                    // 不正解
                    finalFeedbackMessage.textContent = "答えが違うようです。";
                    // 1.5秒後にメッセージを消す
                    setTimeout(() => {
                        finalFeedbackMessage.textContent = "";
                    }, 1500);
                }
            });
        });
    </script>

</body>
</html>
